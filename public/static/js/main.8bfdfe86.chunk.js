(this["webpackJsonpcltc_live-web"]=this["webpackJsonpcltc_live-web"]||[]).push([[0],{135:function(e,t,a){e.exports=a(196)},140:function(e,t,a){},141:function(e,t,a){},193:function(e,t){},196:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(11),c=a.n(r),i=(a(140),a(141),a(31)),l=a(38),s=a(7),u=a(18),m={loading:!1,streams:[],localStream:null,currentStream:null,otherStreams:[],devicesList:[],config:{uid:0,host:!0,channelName:"",token:"",microphoneId:"",cameraId:"",resolution:"480p"},agoraClient:null,mode:"live",codec:"h264",muteVideo:!0,muteAudio:!0,screen:!1,profile:!1},d=function(e,t){switch(t.type){case"config":return Object(s.a)(Object(s.a)({},e),{},{config:t.payload});case"client":return Object(s.a)(Object(s.a)({},e),{},{client:t.payload});case"loading":return Object(s.a)(Object(s.a)({},e),{},{loading:t.payload});case"codec":return Object(s.a)(Object(s.a)({},e),{},{codec:t.payload});case"video":return Object(s.a)(Object(s.a)({},e),{},{muteVideo:t.payload});case"audio":return Object(s.a)(Object(s.a)({},e),{},{muteAudio:t.payload});case"screen":return Object(s.a)(Object(s.a)({},e),{},{screen:t.payload});case"devicesList":return Object(s.a)(Object(s.a)({},e),{},{devicesList:t.payload});case"localStream":return Object(s.a)(Object(s.a)({},e),{},{localStream:t.payload});case"profile":return Object(s.a)(Object(s.a)({},e),{},{profile:t.payload});case"currentStream":var a=e.streams,n=t.payload,o=a.filter((function(e){return e.getId()!==n.getId()}));return Object(s.a)(Object(s.a)({},e),{},{currentStream:n,otherStreams:o});case"addStream":var r=e.streams,c=e.currentStream,i=t.payload,u=c;if(u||(u=i),4===r.length)return Object(s.a)({},e);var m=[].concat(Object(l.a)(r),[i]),d=m.filter((function(e){return e.getId()!==u.getId()}));return Object(s.a)(Object(s.a)({},e),{},{streams:m,currentStream:u,otherStreams:d});case"removeStream":var f=e.streams,p=e.currentStream,h=t.stream,g=t.uid,v=h?h.getId():g,b=p,y=f.filter((function(e){return e.getId()!==v}));v===p.getId()&&(b=0===y.length?null:y[0]);var S=b?y.filter((function(e){return e.getId()!==b.getId()})):[];return Object(s.a)(Object(s.a)({},e),{},{streams:y,currentStream:b,otherStreams:S});case"clearAllStream":var E=e.streams,x=e.localStream,j=e.currentStream;return E.forEach((function(e){e.isPlaying()&&e.stop()})),x&&(x.isPlaying()&&x.stop(),x.close()),j&&(j.isPlaying()&&j.stop(),j.close()),Object(s.a)(Object(s.a)({},e),{},{currentStream:null,localStream:null,streams:[]});default:throw new Error("mutation type not defined")}},f=a(44),p=a(3),h=a(246),g=a(112),v=a.n(g),b=a(117),y=a.n(b),S=a(118),E=a.n(S),x=a(119),j=a.n(x),k=a(68),C=a(233),O=a(235),_=a(234),I=a(116),N=a.n(I),w=a(232),A={success:v.a,warning:N.a,error:y.a,info:E.a},R=Object(w.a)((function(e){return{success:{backgroundColor:k.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:C.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"},customSnackbar:{minWidth:"180px !important",minHeight:"40px !important",background:"rgba(0,0,0,0.7)",boxShadow:"0px 2px 4px 0px rgba(42,62,84,0.24)",borderRadius:"30px",justifyContent:"center",padding:"0 11px"}}}));function V(e){var t=R(),a=W(),r=e.message,c=(e.onClose,e.variant),i=Object(f.a)(e,["message","onClose","variant"]),l=A[c];return Object(n.useEffect)((function(){var e=setTimeout((function(){a.removeTop()}),1e3);return function(){clearTimeout(e)}}),[a]),o.a.createElement(_.a,Object.assign({className:Object(p.a)(t[c],t.customSnackbar),"aria-describedby":"client-snackbar",message:o.a.createElement("span",{id:"client-snackbar",className:t.message},"error"===c?o.a.createElement("i",{className:"error-icon"}):o.a.createElement(l,{className:Object(p.a)(t.icon,t.iconVariant)}),r),action:[o.a.createElement(O.a,{key:"close","aria-label":"close",color:"inherit",onClick:function(){a.removeTop()}},o.a.createElement(j.a,{className:Object(p.a)(t.icon)}))]},i))}function T(e){var t=function(e){};return o.a.createElement(o.a.Fragment,null,e.toasts.map((function(e,a){return o.a.createElement(h.a,{key:a,open:!0,anchorOrigin:{vertical:"top",horizontal:"center"}},o.a.createElement(V,{onClose:t,variant:e.variant,message:"".concat(e.message)}))})))}var P=a(236),D=Object(w.a)((function(e){return{progress:{margin:e.spacing(2),color:"#44A2FC"},container:{height:"100%",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:"#666666"}}}));function L(){var e=D();return o.a.createElement("div",{className:e.container},o.a.createElement(P.a,{className:e.progress}))}var F=Object(n.createContext)({}),B=Object(n.createContext)({}),M=function(e){var t=e.children,a=Object(n.useReducer)(d,m),r=Object(u.a)(a,2),c=r[0],i=r[1],f=Object(n.useState)([]),p=Object(u.a)(f,2),h=p[0],g=p[1],v={startLoading:function(){i({type:"loading",payload:!0})},stopLoading:function(){i({type:"loading",payload:!1})},updateConfig:function(e){i({type:"config",payload:Object(s.a)(Object(s.a)({},c.config),e)})},setClient:function(e){i({type:"client",payload:e})},setCodec:function(e){i({type:"codec",payload:e})},setVideo:function(e){i({type:"video",payload:e})},setAudio:function(e){i({type:"audio",payload:e})},setScreen:function(e){i({type:"screen",payload:e})},setProfile:function(e){i({type:"profile",payload:e})},toastSuccess:function(e){g([].concat(Object(l.a)(h),[{variant:"success",message:e}]))},toastInfo:function(e){g([].concat(Object(l.a)(h),[{variant:"info",message:e}]))},toastError:function(e){g([].concat(Object(l.a)(h),[{variant:"error",message:e}]))},removeTop:function(){var e=h.filter((function(e,t){return t>0}));g(Object(l.a)(e))},setLocalStream:function(e){i({type:"localStream",payload:e})},setCurrentStream:function(e){i({type:"currentStream",payload:e})},setDevicesList:function(e){i({type:"devicesList",payload:e})},clearAllStream:function(){i({type:"clearAllStream"})},addLocal:function(e){var t=e.stream;v.setLocalStream(t),v.setCurrentStream(t)},addStream:function(e){var t=e.stream;i({type:"addStream",payload:t})},removeStream:function(e){var t=e.stream;i({type:"removeStream",stream:t})},removeStreamById:function(e){var t=e.uid;i({type:"removeStream",uid:t})},connectionStateChanged:function(e){v.toastInfo("".concat(e.curState))}};return o.a.createElement(F.Provider,{value:c},o.a.createElement(B.Provider,{value:v},o.a.createElement(T,{toasts:h}),c.loading?o.a.createElement(L,null):null,t))};function U(){return Object(n.useContext)(F)}function W(){return Object(n.useContext)(B)}var z=a(241),H=a(244),$=a(240),q=a(4),J=a(237),X=a(247),G=a(238),K=a(239),Q=a(27),Y=o.a.createContext({}),Z=function(e){var t=e.children;return o.a.createElement(Q.a,null,o.a.createElement(i.c,null,o.a.createElement(i.a,null,(function(e){return o.a.createElement(Y.Provider,{value:e},t)}))))};function ee(){return Object(n.useContext)(Y)}var te=a(63),ae=a.n(te),ne=a(64),oe=a(65),re=new(function(){function e(){Object(ne.a)(this,e),this._liveclass={},this._serverUrl="http://cltcbd.xyz/api/",this._liveClassServerUrl="http://class.cltcbd.xyz/"}return Object(oe.a)(e,[{key:"liveclass",get:function(){return this._liveclass},set:function(e){this._liveclass=e}},{key:"serverUrl",get:function(){return this._serverUrl},set:function(e){this._serverUrl=e}},{key:"liveClassServerUrl",get:function(){return this._liveClassServerUrl},set:function(e){this._liveClassServerUrl=e}}]),e}()),ce=Object(q.a)({root:{color:"#999999","&$checked":{color:"#44A2FC"},"&:hover":{backgroundColor:"inherit"}}})((function(e){e.children;var t=Object(f.a)(e,["children"]);return o.a.createElement("div",{className:"role-item"},o.a.createElement("div",{className:"icon-".concat(t.value,"-").concat(t.checked?"active":"inactive")}),o.a.createElement("div",{className:"radio-row ".concat(t.value)},o.a.createElement("div",{className:"custom-radio"},o.a.createElement("input",{type:"radio",value:t.value,checked:t.checked,onChange:t.onChange}),o.a.createElement("div",{className:"checkmark"})),o.a.createElement(H.a,{flex:"1",className:"role-name-".concat(t.checked?"active":"inactive")},t.value)))})),ie=Object(w.a)((function(e){return{fontStyle:{color:"#9ee2ff"},midItem:{marginTop:"1rem",marginBottom:"6rem"},item:{flex:1,display:"flex",alignItems:"center"},coverLeft:{background:"linear-gradient(to bottom, #307AFF, 50%, #46cdff)",alignItems:"center",flex:1,display:"flex",flexDirection:"column"},coverContent:{display:"flex",justifyContent:"center",flexDirection:"column",color:"#fff"},container:{display:"flex",justifyContent:"center",alignItems:"center"},card:{display:"flex",minWidth:700,minHeight:500,maxHeight:500,borderRadius:"10px",boxShadow:"0px 6px 18px 0px rgba(0,0,0,0.2)"},input:{maxWidth:"250px",minWidth:"250px",alignSelf:"center"},grid:{margin:"0 !important"},button:{lineHeight:"21px",color:"rgba(255,255,255,1)",fontSize:"17px",textTransform:"none",height:"44px",width:"260px","&:hover":{backgroundColor:"#82C2FF"},margin:e.spacing(1),marginTop:"33px",backgroundColor:"#44a2fc",borderRadius:"30px"},radio:{padding:"0",fontSize:"14px",alignItems:"center",paddingRight:"5px"}}}));function le(){var e=ie(),t=ee(),a=U(),n=W(),r=re.serverUrl,c="",i=function(e){var t=e.target.value;n.updateConfig({host:"host"===t})};return o.a.createElement(H.a,{marginTop:"114px",flex:"1",display:"flex",alignItems:"center",justifyContent:"flex-start",flexDirection:"column"},o.a.createElement(Q.b,{to:"/setting",className:"setting-btn"}),o.a.createElement("div",{className:"role-container"},o.a.createElement(ce,{className:e.radio,value:"host",checked:a.config.host,onChange:i}),o.a.createElement(ce,{className:e.radio,value:"audience",checked:!a.config.host,onChange:i})),o.a.createElement(H.a,{marginTop:"92",flex:"1",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},o.a.createElement(J.a,{className:Object(p.a)(e.input,e.grid)},o.a.createElement(X.a,{htmlFor:"accessToken"},"Please provide access token"),o.a.createElement(G.a,{id:"accessToken",name:"accessToken",defaultValue:c,onChange:function(e){c=e.target.value}})),o.a.createElement(J.a,{className:e.grid},o.a.createElement(K.a,{onClick:function(){ae.a.post(r+"liveparticipants/verification",{access_token:c,user_type:a.config.host?"host":"audience"}).then((function(e){200===e.status?(re.liveclass=e.data,n.updateConfig({channelName:e.data.channel_name}),n.startLoading(),t.history.push({pathname:"/meeting/".concat(e.data.channel_name)})):n.toastError("Invalid Credentials")}))},variant:"contained",color:"primary",className:e.button},"Start Live Class"))))}var se=a(32),ue=a.n(se),me=a(121),de=a.n(me);console.log("agora sdk version: "+ue.a.VERSION+" compatible: "+ue.a.checkSystemRequirements());var fe=function(){function e(){Object(ne.a)(this,e),this._client=null,this._joined=!1,this._localStream=null,this._params={},this._uid=0,this._eventBus=new de.a,this._showProfile=!1,this._subscribed=!1,this._created=!1}return Object(oe.a)(e,[{key:"createClient",value:function(e){return this._client=ue.a.createClient({mode:e.mode,codec:e.codec}),this._client}},{key:"destroy",value:function(){this._created=!1,this._client=null}},{key:"on",value:function(e,t){-1===["localStream-added","screenShare-canceled"].indexOf(e)?this._client.on(e,t):this._eventBus.on(e,t)}},{key:"setClientRole",value:function(e){this._client.setClientRole(e)}},{key:"createRTCStream",value:function(e){var t=this;return new Promise((function(a,n){t._uid=t._localStream?t._localStream.getId():e.uid,t._localStream&&(t.unpublish(),t._localStream.isPlaying()&&t._localStream.stop(),t._localStream.close());var o=ue.a.createStream({streamID:t._uid,audio:!0,video:!0,screen:!1,microphoneId:e.microphoneId,cameraId:e.cameraId});e.resolution&&"default"!==e.resolution&&o.setVideoProfile(e.resolution),o.init((function(){t._localStream=o,t._eventBus.emit("localStream-added",{stream:t._localStream}),!1===e.muteVideo&&t._localStream.muteVideo(),!1===e.muteAudio&&t._localStream.muteAudio(),a()}),(function(e){n(e),console.error("init local stream failed ",e)}))}))}},{key:"createScreenSharingStream",value:function(e){var t=this;return new Promise((function(a,n){t._uid=t._localStream?t._localStream.getId():e.uid,t._localStream&&(t._uid=t._localStream.getId(),t.unpublish(),t._localStream.isPlaying()&&t._localStream.stop(),t._localStream.close());var o=ue.a.createStream({streamID:t._uid,audio:!0,video:!1,screen:!0,microphoneId:e.microphoneId,cameraId:e.cameraId});e.resolution&&"default"!==e.resolution&&o.setScreenProfile("".concat(e.resolution,"_1")),o.on("stopScreenSharing",(function(e){t._eventBus.emit("stopScreenSharing",e)})),o.init((function(){t._localStream=o,t._eventBus.emit("localStream-added",{stream:t._localStream}),a()}),(function(e){a(e)}))}))}},{key:"subscribe",value:function(e,t){this._client.subscribe(e,t)}},{key:"_createTmpStream",value:function(){var e=this;return this._uid=0,new Promise((function(t,a){e._localStream&&e._localStream.close();var n=ue.a.createStream({streamID:e._uid,audio:!0,video:!0,screen:!1});n.init((function(){e._localStream=n,t()}),(function(e){a(e),console.error("init local stream failed ",e)}))}))}},{key:"getDevices",value:function(){var e=this;return new Promise((function(t,a){e._client||e.createClient({codec:"h264",mode:"live"}),e._createTmpStream().then((function(){ue.a.getDevices((function(a){e._localStream.close(),t(a)}))}))}))}},{key:"setStreamFallbackOption",value:function(e,t){this._client.setStreamFallbackOption(e,t)}},{key:"enableDualStream",value:function(){var e=this;return new Promise((function(t,a){e._client.enableDualStream(t,a)}))}},{key:"setRemoteVideoStreamType",value:function(e,t){this._client.setRemoteVideoStreamType(e,t)}},{key:"join",value:function(e){var t=this;return this._joined="pending",new Promise((function(a,n){t._params=e,t._client.init("eb3df5321ac94d7088a197d397c08b7f",(function(){t._client.join(e.token?e.token:null,e.channel,e.uid?+e.uid:null,(function(o){t._uid=o,console.log("join channel: "+e.channel+" success, uid: "+o),t._joined=!0,e.uid=o,e.host?t.createRTCStream(e).then((function(){t.enableDualStream().then((function(){t.setRemoteVideoStreamType(t._localStream,0),a()})).catch((function(e){n()}))})).catch((function(e){n(e)})):a()}),(function(e){t._joined=!1,n(e),console.error("client join failed",e)}))}),(function(e){t._joined=!1,n(e),console.error(e)}))}))}},{key:"publish",value:function(){this._client.publish(this._localStream,(function(e){console.error(e)}))}},{key:"unpublish",value:function(){this._client&&this._client.unpublish(this._localStream,(function(e){console.error(e)}))}},{key:"leave",value:function(){var e=this;return new Promise((function(t){e._client.leave((function(){e._joined=!1,e.destroy(),t()}),(function(e){console.log("channel leave failed"),console.error(e)}))}))}}]),e}();var pe=a(243),he=a(250),ge=a(249),ve=a(248),be=Object(w.a)((function(e){return{menuTitle:{color:"#333333",textAlign:"center",fontSize:"h6.fontSize",position:"relative",top:"7px"},marginTop:{marginTop:"0 !important"},menu:{margin:"0.25rem 0",position:"relative",height:"39px",display:"flex",justifyContent:"center",alignItems:"center"},line:{marginTop:"0.2rem",marginBottom:"0.5rem",borderBottom:"1px solid #EAEAEA"},hr:{borderBottom:"1px solid #EAEAEA"},switchItem:{flexDirection:"row-reverse !important",marginLeft:"0 !important",marginRight:"0 !important",justifyContent:"space-between"}}})),ye=Object(q.a)((function(e){return{root:{width:42,height:26,padding:2,margin:e.spacing(1)},switchBase:{padding:1,"&$checked":{transform:"translateX(16px)",color:e.palette.common.white,"& + $track":{backgroundColor:"#44A2FC",opacity:1,border:"none"}},"&$focusVisible $thumb":{color:"#52d869",border:"6px solid #fff"}},thumb:{width:24,height:24},track:{borderRadius:13,border:"1px solid ".concat(e.palette.grey[400]),backgroundColor:e.palette.grey[50],opacity:1,transition:e.transitions.create(["background-color","border"])},checked:{},focusVisible:{}}}))((function(e){var t=e.classes,a=Object(f.a)(e,["classes"]);return o.a.createElement(ve.a,Object.assign({focusVisibleClassName:t.focusVisible,classes:{root:t.root,switchBase:t.switchBase,thumb:t.thumb,track:t.track,checked:t.checked}},a))}));function Se(){var e=be(),t=U(),a=W(),r=function(){var e=U(),t=W(),a=Object(n.useMemo)((function(){return new fe}),[]),o=Object(n.useMemo)((function(){return[e.devicesList.filter((function(e){return"videoinput"===e.kind})).map((function(e,t){return{value:e.deviceId,label:e.label?e.label:"Video Input ".concat(t)}})),e.devicesList.filter((function(e){return"audioinput"===e.kind})).map((function(e,t){return{value:e.deviceId,label:e.label?e.label:"Audio Input ".concat(t)}}))]}),[e.devicesList]),r=Object(u.a)(o,2),c=r[0],i=r[1];return Object(n.useEffect)((function(){if(!(c.length>0||i.length>0))return a.getDevices().then((function(e){t.setDevicesList(e)})),function(){a.destroy()}}),[i,t,c,a]),Object(n.useEffect)((function(){!c[0]||!i[0]||e.config.cameraId&&e.config.microphoneId||(t.updateConfig({cameraId:c[0].value,microphoneId:i[0].value}),t.stopLoading())}),[t,e.devicesList,e.config,c,i]),[c,i]}(),c=Object(u.a)(r,2),i=c[0],l=c[1];return o.a.createElement(H.a,{flex:"1",display:"flex",flexDirection:"column"},o.a.createElement(Q.b,{to:"/",className:"back-btn"}),o.a.createElement(H.a,{display:"flex",flex:"1",flexDirection:"column",padding:"0 1rem",justifyContent:"flex-start"},o.a.createElement(J.a,{className:e.menu},o.a.createElement("span",{className:e.menuTitle},"Setting")),o.a.createElement("div",{className:e.line}),o.a.createElement(J.a,null,o.a.createElement(X.a,{htmlFor:"resolution"},"Resolution"),o.a.createElement(pe.a,{value:t.config.resolution,onChange:function(e){a.updateConfig({resolution:e.target.value})},inputProps:{name:"resolution",id:"resolution"}},o.a.createElement(ge.a,{value:"480p"},"480p"),o.a.createElement(ge.a,{value:"720p"},"720p"),o.a.createElement(ge.a,{value:"1080p"},"1080p"))),o.a.createElement(J.a,null,o.a.createElement(X.a,{htmlFor:"codec"},"Video Codec"),o.a.createElement(pe.a,{value:t.codec,onChange:function(e){a.setCodec(e.target.value)},inputProps:{name:"codec",id:"codec"}},o.a.createElement(ge.a,{value:"h264"},"h264"),o.a.createElement(ge.a,{value:"vp8"},"vp8"))),o.a.createElement(J.a,null,o.a.createElement(X.a,{htmlFor:"camera"},"Camera"),o.a.createElement(pe.a,{value:t.config.cameraId,onChange:function(e){a.updateConfig({cameraId:e.target.value})},inputProps:{name:"camera",id:"camera"}},i.map((function(e,t){return o.a.createElement(ge.a,{key:t,value:e.value},e.label)})))),o.a.createElement(J.a,null,o.a.createElement(X.a,{htmlFor:"Microphone"},"Microphone"),o.a.createElement(pe.a,{value:t.config.microphoneId,onChange:function(e){a.updateConfig({microphoneId:e.target.value})},inputProps:{name:"microphone",id:"microphone"}},l.map((function(e,t){return o.a.createElement(ge.a,{key:t,value:e.value},e.label)})))),o.a.createElement(J.a,null,o.a.createElement(he.a,{control:o.a.createElement(ye,{checked:t.muteVideo,onChange:function(){a.setVideo(!t.muteVideo)},value:t.muteVideo,color:"primary"}),className:e.switchItem,label:"Video"}),o.a.createElement("div",{className:e.hr})),o.a.createElement(J.a,null,o.a.createElement(he.a,{control:o.a.createElement(ye,{checked:t.muteAudio,onChange:function(){a.setAudio(!t.muteAudio)},value:t.muteAudio,color:"primary"}),className:e.switchItem,label:"Audio"}),o.a.createElement("div",{className:e.hr})),o.a.createElement(J.a,null,o.a.createElement(he.a,{control:o.a.createElement(ye,{checked:t.profile,onChange:function(){a.setProfile(!t.profile)},value:t.profile,color:"primary"}),className:e.switchItem,label:"Profile"}),o.a.createElement("div",{className:e.hr}))))}var Ee=Object(w.a)((function(e){return{fontStyle:{color:"#9ee2ff"},midItem:{marginTop:"1rem",marginBottom:"6rem"},item:{flex:1,display:"flex",alignItems:"center"},coverLeft:{background:"linear-gradient(to bottom, #307AFF, 50%, #46cdff)",alignItems:"center",flex:1,display:"flex",flexDirection:"column"},coverContent:{display:"flex",justifyContent:"center",flexDirection:"column",color:"#fff"},coverRight:{position:"relative",flex:1,display:"flex"},container:{display:"flex",justifyContent:"center",alignItems:"center"},card:{display:"flex",minWidth:200,minHeight:450,maxHeight:1e3,borderRadius:"10px",boxShadow:"0px 6px 18px 0px rgba(0,0,0,0.2)"},input:{maxWidth:"250px",minWidth:"250px",alignSelf:"center"},grid:{margin:"0 !important"},button:{height:"44px",width:"260px","&:hover":{backgroundColor:"#307AFF"},margin:e.spacing(1),marginTop:"33px",backgroundColor:"#44a2fc",borderRadius:"30px"}}}));function xe(){var e=Ee();return o.a.createElement(H.a,{display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement($.a,{className:e.card},o.a.createElement(H.a,{display:"flex",flex:"1"},o.a.createElement("div",{className:e.coverRight},o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/",component:le}),o.a.createElement(i.a,{path:"/setting",component:Se}))))))}var je=Object(w.a)((function(){return{container:{height:"100%",width:"100%",minWidth:200,minHeight:100,boxSizing:"content-box",display:"flex",justifyContent:"center"}}})),ke=function(){var e=U(),t=W(),a=je();return Object(n.useEffect)((function(){!0===e.loading&&t.stopLoading()}),[e.loading,t]),o.a.createElement(z.a,{maxWidth:"sm",className:a.container},o.a.createElement(xe,null))};a(163);function Ce(e){var t=e.stream,a=e.domId,r=e.uid,c=Object(n.useState)(!1),i=Object(u.a)(c,2),l=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(u.a)(m,2),f=d[0],p=d[1],h=Object(n.useState)({accessDelay:0,fps:0,resolution:0}),g=Object(u.a)(h,2),v=g[0],b=g[1],y=Object(n.useMemo)((function(){return v}),[v]);Object(n.useEffect)((function(){var a=setInterval((function(){t.getStats((function(t){var a=e.local?t.videoSendResolutionWidth:t.videoReceiveResolutionWidth,n=e.local?t.videoSendResolutionHeight:t.videoReceiveResolutionHeight,o=e.local?t.videoSendFrameRate:t.videoReceiveFrameRate;b({accessDelay:"".concat(t.accessDelay?t.accessDelay:0),resolution:"".concat(a,"x").concat(n),fps:"".concat(o||0)})}))}),500);return function(){clearInterval(a)}}),[e.local,t]);var S=o.a.useRef(!1);return Object(n.useEffect)((function(){if(t)return t.isPlaying()||(S.current=!0,t.play(a,{fit:"cover"},(function(e){e&&"aborted"!==e.status&&(console.log("stream-player play failed ",a),p(!0)),S.current=!1}))),function(){t&&t.isPlaying()&&t.stop()}}),[t,a]),o.a.createElement("div",{className:"stream-player ".concat(f?"autoplay":""),id:a,onClick:function(){f&&!l&&(t.resume(),s(!0))},onDoubleClick:function(a){a.stopPropagation(),e.onDoubleClick(t)}},e.children,e.showProfile?o.a.createElement("div",{className:e.className},o.a.createElement("span",null,"SD-RTN delay: ",y.accessDelay,"ms"),o.a.createElement("span",null,"Video: ",y.fps,"fps ",y.resolution)):null,e.showUid&&r?o.a.createElement("div",{className:"stream-uid"},"UID: ",r):null)}var Oe=a(69),_e=a(122),Ie=a.n(_e),Ne=Object(w.a)({menu:{height:"10vh",display:"flex",justifyContent:"center",alignItems:"center",zIndex:"1"},customBtn:{width:"50px",height:"50px",marginLeft:"20px",borderRadius:"26px",backgroundColor:"rgba(0, 0, 0, 0.4)",backgroundSize:"50px",cursor:"pointer"},leftAlign:{display:"flex",flex:"1",justifyContent:"space-evenly"},rightAlign:{display:"flex",flex:"1",justifyContent:"center"},menuContainer:{width:"100%",height:"100%",position:"absolute",display:"flex",flexDirection:"column",justifyContent:"flex-end"}}),we=function(){var e=Ne(),t=ee(),a=U(),r=W(),c=Object(n.useMemo)((function(){var e=new fe;return e._created||(e.createClient({codec:a.codec,mode:a.mode}),e._created=!0),e}),[a.codec,a.mode]),i=function(e){var t=U(),a=W(),o=[t.localStream,t.currentStream],r=o[0],c=o[1],i=Object(n.useMemo)((function(){return t.streams.filter((function(e){return e.getId()!==c.getId()}))}),[t,c]);return Object(n.useEffect)((function(){e&&!1===e._subscribed&&(e.on("connection-state-change",a.connectionStateChanged),e.on("localStream-added",a.addLocal),e.on("stream-published",a.addStream),e.on("stream-added",(function(t){var n=t.stream;e.subscribe(n,(function(e){a.toastError("stream ".concat(t.stream.getId()," subscribe failed: ").concat(e))}))})),e.on("stream-removed",a.removeStream),e.on("peer-leave",a.removeStreamById),e.on("stream-subscribed",(function(t){e.setStreamFallbackOption(t.stream,2),a.addStream(t)})),e._subscribed=!0)}),[e,a]),Object(n.useEffect)((function(){e&&!0===e._subscribed&&null!=c&&(e.setRemoteVideoStreamType(c,0),i.forEach((function(t){e.setRemoteVideoStreamType(t,1)})))}),[e,c,i]),[r,c,i]}(c),l=Object(u.a)(i,2),s=l[0],m=l[1],d=Object(n.useMemo)((function(){return{token:a.config.token,channel:a.config.channelName,microphoneId:a.config.microphoneId,cameraId:a.config.cameraId,resolution:a.config.resolution,muteVideo:a.muteVideo,muteAudio:a.muteAudio,uid:0,host:a.config.host}}),[a]),f=t.history;Object(n.useEffect)((function(){d.channel||f.push("/")}),[d.channel,f]),Object(n.useEffect)((function(){d.channel&&c._created&&!1===c._joined&&c.join(d).then((function(){d.host&&c.publish(),r.stopLoading()})).catch((function(e){r.toastError("Media ".concat(e.info)),t.history.push("/")}))}),[c,r,d,t]);var h=function(e){return function(n){switch(n.stopPropagation(),e){case"video":a.muteVideo?s.muteVideo():s.unmuteVideo(),r.setVideo(!a.muteVideo);break;case"audio":a.muteAudio?s.muteAudio():s.unmuteAudio(),r.setAudio(!a.muteAudio);break;case"screen":a.screen?c.createRTCStream({token:null,channel:a.config.channelName,microphoneId:a.config.microphoneId,resolution:a.config.resolution,video:a.video,audio:a.audio}).then((function(){c.publish(),r.setScreen(!1)})).catch((function(e){console.log(e),r.toastError("Media ".concat(e.info)),t.history.push("/")})):c.createScreenSharingStream({token:null,channel:a.config.channelName,microphoneId:a.config.microphoneId,cameraId:a.config.cameraId,resolution:a.config.resolution}).then((function(){c.publish(),r.setScreen(!0)})).catch((function(e){console.log(e),r.toastError("Media ".concat(e.info)),t.history.push("/")}));break;case"profile":break;default:throw new Error("Unknown click handler, name: ".concat(e))}}},g=Ie()(re.liveClassServerUrl);g.on("live_comment-submit",(function(e){e.email!==re.liveclass.user_mail&&Object(Oe.addResponseMessage)(e.content)})),ae.a.get(re.liveClassServerUrl+"get/messages/".concat(re.liveclass.id)).then((function(e){e.data.forEach((function(e){Object(Oe.addResponseMessage)(e.content)}))}));return a.config.channelName.length>0?o.a.createElement("div",{className:"meeting"},o.a.createElement("div",{className:"current-view"},o.a.createElement("div",{className:"nav"},o.a.createElement("div",{className:"quit",onClick:function(){c.leave().then((function(){r.clearAllStream(),r.updateConfig({channelName:""}),t.history.push("/")}))}}),o.a.createElement("div",{className:"avatar-container"},o.a.createElement("div",{className:"default-avatar"}),o.a.createElement("div",{className:"avatar-text"},"cltc Test"),o.a.createElement("div",{className:"like"}))),m?o.a.createElement(Ce,{className:"main-stream-profile",showProfile:a.profile,local:!!d.host&&(m&&m.getId()===s&&s.getId()),stream:m,onDoubleClick:function(e){r.setCurrentStream(e)},uid:m.getId(),domId:"stream-player-".concat(m.getId())},o.a.createElement("div",{className:e.menuContainer},o.a.createElement("div",{className:e.menu},d.host&&o.a.createElement("i",{onClick:h("video"),className:Object(p.a)(e.customBtn,a.muteVideo?"mute-video":"unmute-video")}),d.host&&o.a.createElement("i",{onClick:h("audio"),className:Object(p.a)(e.customBtn,a.muteAudio?"mute-audio":"unmute-audio")}),o.a.createElement(Oe.Widget,{title:"CLTC Live Broadcat",subtitle:"Feel free to ask a question",senderPlaceHolder:"Type a message...",handleNewUserMessage:function(e){g.emit("live_comment-signal",{message:e,live_id:re.liveclass.id,email:re.liveclass.user_mail,user_id:re.liveclass.user_id})}})))):null)):o.a.createElement("div",null,"Unauthorized")};var Ae=function(){return o.a.createElement(Z,null,o.a.createElement(i.c,null,o.a.createElement(i.a,{exact:!0,path:"/meeting/:name",component:we}),o.a.createElement(i.a,{path:"/",component:ke})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Re=a(242),Ve=a(123),Te=Object(Ve.a)({typography:{fontFamily:'-apple-system, BlinkMacSystemFont, \\"Segoe UI\\", \\"Roboto\\", \\"Oxygen\\", \\"Ubuntu\\", \\"Cantarell\\", \\"Fira Sans\\", \\"Droid Sans\\", \\"Helvetica Neue\\", sans-serif',fontSize:14,fontWeightLight:300,fontWeightRegular:400,fontWeightMedium:500,color:"#333"},overrides:{MuiFormControl:{root:{margin:"0.3rem 0"}},MuiInput:{underline:{"&:before":{borderBottom:"1px solid #EAEAEA"},"&:hover:not($disabled):not($focused):not($error):before":{borderBottom:"2px solid #EAEAEA"},"&$focused":{"&:after":{borderBottom:"2px solid #44a2fc"}}}}}});c.a.render(o.a.createElement(Re.a,{theme:Te},o.a.createElement(M,null,o.a.createElement(Ae,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[135,1,2]]]);
//# sourceMappingURL=main.8bfdfe86.chunk.js.map